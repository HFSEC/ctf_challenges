#### 回顾

我们来简单回顾一下上一题的解题。首先我们观察到了：不管我们在留言板中输入什么，最后都会原封不动的显示在下面的提交结果中。那么我们试想一下，如果我们提交一段HTML代码，是都也会出现在提交结果中呢？是的，恭喜你，猜对了。这是由于我们未对用户提交的数据做任何过滤措施造成的。那么，学过了JAVASCRIPT后应该知道，当我们在页面中输入以下代码时就会 alert !

> <script>alert(1)</script>

以上代码也被称为“Payload” , 我们这里简单地使用 alert 弹窗来检测这个页面是否存在注入点，当上面的payload被成功执行后，就说明这个页面存在注入点，我们就可以构造更进一步的payload来实现更强大的功能。

#### 知新

至于是什么更强大的功能呢？这就是本题的内容了。在进行本次XSS攻击之前，你需要简单的了解一下网络应用中的身份认证系统。

在了解身份认证系统之前又会牵扯到一个问题，就是html页面是无状态的。什么叫“无状态性”呢？具体说就是一个页面不会知道另一个页面上发生了什么事。打个比方，当你在Login.html页面进行登录操作时，登录成功后，登录成功的状态会保持在Login.html这个页面！但是根据html页面的无状态性，除了Login.html之外的页面并不知道你已经登录成功了！也就说如果不做任何措施去保持登录状态的话，你到了任何一个页面、做任何一个操作前都要先登录一遍，输入一遍账户和密码！这看起来是不是和你们平时的认知不符，但事实就是这样，为了不让用户在每次操作之前都要输入一遍账户密码，我们就需要想一些办法来告知别的页面该用户的登录状态。

浏览器中的Cookie就是可以临时存放一些用户的信息，我们把用户的登录状态放在cookie中，这样就可以保持住登录状态了。

在首次登录成功后，服务器会返回给用户一个临时的唯一识别码，一般被称为“token”、“sessionId” 等等。这就相当于是会员卡的卡号。你可以把整个网站想象成一个大楼，在你刚进入这个大楼的时候，要求你向大门的门卫报上你的名字和口令，然后门卫验证了你的身份，发给你一张会员卡，接下来你就可以拿着这张会员卡在这个大楼随便逛，而不需要再次提供你的名字和口令了。

好了，理解了网络应用的身份认证机制后，我们就想想这个机制有没有什么安全问题？

（此处自己好好想想，别马上看下面的文字）

由于正常用户身份验证通过后并拥有token后，后面进行的操作都是根据你的token来判断你是否登录成功。有token则说明目前的状态是“已登录”，没有token 则说明当前的登录状态是“未登录”。那么，好了，如果你的token被盗了呢？那么盗用你token的人就可以以你的名义做登录后的任何事情了。

**XSS的一个用途就在此处，通过js获取他人cookie中的token，然后拿着别人的token去干一些事情。**

至于怎么接收这个盗来的token，这里提示一下，你可以在自己的服务器上写一个php页面来接收，也可以使用网上一把大现有的xss平台，专门用于接收信息，这里帮你们找了一个 http://xsspt.com/index.php?do=login